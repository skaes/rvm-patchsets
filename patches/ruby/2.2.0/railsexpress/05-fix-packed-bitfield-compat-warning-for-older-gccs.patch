diff -rupN a/configure b/configure
--- a/configure	2015-01-07 07:23:23.420553467 +0000
+++ b/configure	2015-01-07 07:20:57.769700633 +0000
@@ -7471,6 +7471,9 @@ rb_cv_warnflags="$warnflags"
 if test "$GCC:${warnflags+set}:no" = yes::no; then
     if test $gcc_major -ge 4; then
 	extra_warning=-Werror=extra-tokens
+        if test $gcc_major -gt 4 -o $gcc_minor -ge 4; then
+            extra_warning="$extra_warning -Wno-packed-bitfield-compat"
+        fi
     else
 	extra_warning=
     fi
@@ -7484,7 +7487,6 @@ if test "$GCC:${warnflags+set}:no" = yes
 		 -Werror=implicit-function-declaration \
 		 -Werror=division-by-zero \
 		 -Werror=deprecated-declarations \
-		 -Wno-packed-bitfield-compat \
 		 $extra_warning \
 		 ; do
 	if test "$particular_werror_flags" != yes; then
diff -rupN a/configure.in b/configure.in
--- a/configure.in	2015-01-07 07:23:42.308923341 +0000
+++ b/configure.in	2015-01-07 07:24:22.365708146 +0000
@@ -788,6 +788,9 @@ rb_cv_warnflags="$warnflags"
 if test "$GCC:${warnflags+set}:no" = yes::no; then
     if test $gcc_major -ge 4; then
 	extra_warning=-Werror=extra-tokens
+        if test $gcc_major -gt 4 -o $gcc_minor -ge 4; then
+            extra_warning="$extra_warning -Wno-packed-bitfield-compat"
+        fi
     else
 	extra_warning=
     fi
@@ -801,7 +804,6 @@ if test "$GCC:${warnflags+set}:no" = yes
 		 -Werror=implicit-function-declaration \
 		 -Werror=division-by-zero \
 		 -Werror=deprecated-declarations \
-		 -Wno-packed-bitfield-compat \
 		 $extra_warning \
 		 ; do
 	if test "$particular_werror_flags" != yes; then
